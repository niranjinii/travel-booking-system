<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Packages | Destinations</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="/styles/style.css" />
    <link rel="stylesheet" href="/styles/packages.css" />
  </head>

  <body>
    <div class="page-wrapper">
      <header class="package-header package-header-bg">
        <div class="overlay"></div>
        <%- include('partials/navbar') %>

        <div class="header-content">
          <h1 class="page-title">EXPLORE OUR TRAVEL PACKAGES</h1>
          <p class="page-subtitle">
            Hand-picked destinations for your next great adventure
          </p>
        </div>
      </header>

      <main class="packages-grid-wrapper">
        <!-- Filter & Search Bar -->
        <section class="package-filters container">
          <form class="filter-bar" action="/packages" method="get">
          <input
          type="text"
          name="q"
          value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>"
          class="form-control search-input"
          placeholder="Search destinations or descriptions..."
          />

          <select class="form-select filter-select" name="theme">
          <option value="">All Themes</option>
          <% for (const theme of themes) { %>
            <option value="<%= theme.theme %>" 
            <%= theme.theme === selectedTheme ? 'selected' : '' %>>
            <%= theme.theme %>
          </option>
          <% } %>
          </select>

        <button type="submit" class="btn filter-btn">Search</button>
        </form>
      </section>


        <!-- Packages Grid -->
        <div class="packages-grid">
          <%packages.forEach(pkg => { %>
          <div class="package-card shadow-sm">
            <div class="package-image-container">
              <img
                src="<%= pkg.image %>"
                alt="<%= pkg.package_name %>"
                class="package-image"
              />
              <span class="package-theme badge rounded-pill"
                ><%= pkg.theme %></span
              >
            </div>

            <div class="package-info">
              <h3 class="package-title"><%= pkg.package_name %></h3>

              <div class="package-details">
                <span class="package-days">Days: <%= pkg.duration_days %></span>
                <span class="package-price">Rs.<%= pkg.price %>/person</span>
              </div>

              <a href="/package/<%= pkg.package_id %>" class="book-btn">Book Tour</a>
            </div>
          </div>
          <% }); %>
        </div>
      </main>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>

  </body>
</html>
